<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Wizard · SineWaves.jl</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit">SineWaves.jl</span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li class="is-active"><a class="tocitem" href>Wizard</a><ul class="internal"><li><a class="tocitem" href="#Run-the-Wizard-1"><span>Run the Wizard</span></a></li><li><a class="tocitem" href="#Select-platforms-1"><span>Select platforms</span></a></li><li><a class="tocitem" href="#Select-C-library-github-repository-1"><span>Select C library github repository</span></a></li><li><a class="tocitem" href="#Binary-dependencies-1"><span>Binary dependencies</span></a></li><li><a class="tocitem" href="#Project-name-1"><span>Project name</span></a></li><li><a class="tocitem" href="#Enter-version-of-the-project.-1"><span>Enter version of the project.</span></a></li><li><a class="tocitem" href="#Sandbox-shell-1"><span>Sandbox shell</span></a></li><li><a class="tocitem" href="#Select-artifacts-1"><span>Select artifacts</span></a></li><li><a class="tocitem" href="#Testing-the-build-recipe-against-all-specified-targets-1"><span>Testing the build recipe against all specified targets</span></a></li><li><a class="tocitem" href="#Deployment-of-build-recipe.-1"><span>Deployment of build recipe.</span></a></li></ul></li><li><a class="tocitem" href="../builder/">BinaryBuilder</a></li><li><a class="tocitem" href="../ccalls/">C calls</a></li><li><a class="tocitem" href="../examples/">Examples</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Wizard</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Wizard</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/jakubwro/SineWaves.jl/blob/master/doc/src/wizard.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Wizard-1"><a class="docs-heading-anchor" href="#Wizard-1">Wizard</a><a class="docs-heading-anchor-permalink" href="#Wizard-1" title="Permalink"></a></h1><p>To create <code>build_tarballs.jl</code> script you might want to use run_wizard() function. Let&#39;s do that step by step.</p><h2 id="Run-the-Wizard-1"><a class="docs-heading-anchor" href="#Run-the-Wizard-1">Run the Wizard</a><a class="docs-heading-anchor-permalink" href="#Run-the-Wizard-1" title="Permalink"></a></h2><pre><code class="language-none">julia&gt; using BinaryBuilder
julia&gt; run_wizard()</code></pre><h2 id="Select-platforms-1"><a class="docs-heading-anchor" href="#Select-platforms-1">Select platforms</a><a class="docs-heading-anchor-permalink" href="#Select-platforms-1" title="Permalink"></a></h2><p>You can limit build to some specific platforms.</p><pre><code class="language-none">			# Step 1: Select your platforms

Make a platform selection
 &gt; All Supported Platforms
   Select by Operating System
   Fully Custom Platform Choice</code></pre><h2 id="Select-C-library-github-repository-1"><a class="docs-heading-anchor" href="#Select-C-library-github-repository-1">Select C library github repository</a><a class="docs-heading-anchor-permalink" href="#Select-C-library-github-repository-1" title="Permalink"></a></h2><pre><code class="language-none">			# Step 2a: Obtain the source code

Please enter a URL (git repository or compressed archive) containing the source code to build:
&gt; https://github.com/jakubwro/sinewave</code></pre><pre><code class="language-none">You have selected a git repository. Please enter a branch, commit or tag to use.
Please note that for reproducability, the exact commit will be recorded,
so updates to the remote resource will not be used automatically;
you will have to manually update the recorded commit.
&gt; master</code></pre><p>Then the Wizard can will ask if you want to include additional sources or binary dependencies but I am going to skip that by answering <code>N</code>.</p><h2 id="Binary-dependencies-1"><a class="docs-heading-anchor" href="#Binary-dependencies-1">Binary dependencies</a><a class="docs-heading-anchor-permalink" href="#Binary-dependencies-1" title="Permalink"></a></h2><p><code>sinewave</code> C library has a dependency to FFTW so it needs to be specified during this step.</p><pre><code class="language-none">			# Step 2b: Obtain binary dependencies (if any)

Do you require any (binary) dependencies?  [y/N]: y
Enter JLL package name:
&gt; FFTW_jll</code></pre><h2 id="Project-name-1"><a class="docs-heading-anchor" href="#Project-name-1">Project name</a><a class="docs-heading-anchor-permalink" href="#Project-name-1" title="Permalink"></a></h2><pre><code class="language-none">Enter name of the original C project. In my case it `sinewave`. This will be used for filenames:
&gt; sinewave</code></pre><h2 id="Enter-version-of-the-project.-1"><a class="docs-heading-anchor" href="#Enter-version-of-the-project.-1">Enter version of the project.</a><a class="docs-heading-anchor-permalink" href="#Enter-version-of-the-project.-1" title="Permalink"></a></h2><p>It should be 0.0.1, 0.1.0 or 1.0.0 for the first time (TODO: is that true?)</p><pre><code class="language-none">Enter a version number for this project:
&gt; 0.1.0</code></pre><h2 id="Sandbox-shell-1"><a class="docs-heading-anchor" href="#Sandbox-shell-1">Sandbox shell</a><a class="docs-heading-anchor-permalink" href="#Sandbox-shell-1" title="Permalink"></a></h2><p>Now you&#39;ll be moved to a sandbox shell. There you should type commands to build shared libraries and copy them to predefined libdir and bindir directories. In my case Makefile handles that itself, so the only things I need to do is to enter source code directory and run <code>make install</code></p><pre><code class="language-none">sandbox:${WORKSPACE}/srcdir # cd sinewave/
sandbox:${WORKSPACE}/srcdir/sinewave # apk add fftw fftw-dev
sandbox:${WORKSPACE}/srcdir/sinewave # make install
cc -I. -std=gnu99 -shared -fPIC -o libsinewave.so sinewave.c -lm
cc -I. -std=gnu99 -o sine libsinewave.so examples/fill_and_print_buffer.c -lm
mkdir -p /workspace/destdir/bin
mkdir -p /workspace/destdir/lib
cp libsinewave.so /workspace/destdir/lib
cp sine /workspace/destdir/bin</code></pre><p>After you finish press CTRL+D to quit sandbox. All you typed was recorded and will be stored in the result build recipe. There is an option to edit the script in vi, so you can delete unnecessary commands.</p><h2 id="Select-artifacts-1"><a class="docs-heading-anchor" href="#Select-artifacts-1">Select artifacts</a><a class="docs-heading-anchor-permalink" href="#Select-artifacts-1" title="Permalink"></a></h2><p>Now you need to select artifacts that you want to deploy. Despite that there is also executable generated, I am insterested in deploying just the library</p><pre><code class="language-none">			# Step 4: Select build products

The build has produced several libraries and executables.
Please select which of these you want to consider `products`.
These are generally those artifacts you will load or use from julia.

[press: d=done, a=all, n=none]
   [ ] bin/sine
 &gt; [X] lib/libsinewave.so</code></pre><p>Provide a name for each of your artifacts. This name will be exported from jll project and you will need to specify it in ccall.</p><pre><code class="language-none">Please provide a unique variable name for each build artifact:
lib/libsinewave.so:
&gt; libsinewave</code></pre><h2 id="Testing-the-build-recipe-against-all-specified-targets-1"><a class="docs-heading-anchor" href="#Testing-the-build-recipe-against-all-specified-targets-1">Testing the build recipe against all specified targets</a><a class="docs-heading-anchor-permalink" href="#Testing-the-build-recipe-against-all-specified-targets-1" title="Permalink"></a></h2><p>Now the script will be tested against all build targets in sandboxes. If something will be wrong, you&#39;ll be moved to interactive shell to provide proper seqence of commands for the failing build.</p><h2 id="Deployment-of-build-recipe.-1"><a class="docs-heading-anchor" href="#Deployment-of-build-recipe.-1">Deployment of build recipe.</a><a class="docs-heading-anchor-permalink" href="#Deployment-of-build-recipe.-1" title="Permalink"></a></h2><p>Standard place to keep build recipes is <a href="https://github.com/JuliaPackaging/Yggdrasil">Yggdrasil</a> repository. Anyway, for tutorial purpose I am not going to deploy there. Local file suits me more for now.</p><pre><code class="language-none">			# Step 7: Deployment

How should we deploy this build recipe?
   Open a pull request against the community buildtree, Yggdrasil
   Write to a local file
 &gt; Print to stdout</code></pre></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../">« Home</a><a class="docs-footer-nextpage" href="../builder/">BinaryBuilder »</a></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Tuesday 4 February 2020 20:53">Tuesday 4 February 2020</span>. Using Julia version 1.3.1.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
